from colorama import Fore
from bullet import Bullet
import numpy as np
from person import Person
import config


class Dragon(Person):

    __stages = []
    __ud_stages = []
    __mask = np.array([])
    __alt_mask = np.array([])
    __call_count = 0
    __countdir = 1
    __last_vals = [0,0,0,0,0]
    __maxdir = 5

    def body(self):
        avg = 0
        for val in self.__last_vals:
            avg+=val
        if avg>1:
            return self.__ud_stages[0],self.__alt_mask
        elif avg<-1:
            return self.__ud_stages[1],self.__mask

        if self.__call_count == 0:
            self.__countdir = self.__maxdir-1
        if self.__call_count == self.__maxdir-1:
            self.__countdir = -1
        self.__call_count += self.__countdir
        return self.__stages[self.__call_count],self.__mask

    def get_pos(self):
        return self._cur_pos

    def return_pos(self):
        return self._cur_pos

    def __init__(self):
        self._cur_pos = [0,0]
        a = np.array([[['_'], ['_'], [' '], [' '], [' '], [' '], [' '], [' '], [' '], [' '], [' '], [' '], [' '], [' '], [' '], [' '], [' '], [' '], ['_'], ['_'], [' '], ['|'], ['\\'], [' '], [' '], [' '], [' '], [' '], [' '], [' '], ],
                      [[' '], [' '], ['-'], ['-'], ['_'], ['_'], [' '], [' '], [' '], [' '], [' '], [' '], [' '], [' '], ['_'],
                       ['_'], ['-'], ['-'], [' '], [' '], ['~'], [' '], [' '], ['^'], ['^'], ['^'], ['\\'], ['\\'], [' '], [' '], ],
                      [['_'], ['_'], [' '], [' '], [' '], [' '], ['-'], ['-'], ['_'], ['_'], ['_'], ['_'], ['-'], ['-'], [' '],
                       [' '], [' '], [' '], ['_'], ['_'], [' '], [' '], [' '], [' '], [' '], ['\''], ['`'], ['~'], ['~'], ['P'], ],
                      [[' '], [' '], ['-'], ['-'], ['_'], ['_'], [' '], [' '], [' '], [' '], [' '], [' '], [' '], [' '], ['_'],
                       ['_'], ['-'], ['-'], [' '], [' '], ['\\'], ['\\'], ['\\'], ['_'], [' '], [';'], ['-'], ['-'], ['^'], ['^'], ],
                      [[' '], [' '], [' '], [' '], [' '], [' '], ['-'], ['-'], ['_'], ['_'], ['_'], ['_'], ['-'], ['-'], [' '], [' '], [' '], [' '], [' '], [' '], [' '], [' '], [' '], [' '], ['\\'], ['_'], ['\\'], [' '], ['~'], ['.'], ]])
        self.__stages.append(a)
        a = np.array([[[' '],[' '],[' '],[' '],[' '],[' '],[' '],[' '],[' '],[' '],[' '],[' '],[' '],['_'],['_'],[' '],[' '],[' '],[' '],[' '],[' '],['|'],['\\'],[' '],[' '],[' '],[' '],[' '],[' '],[' '],],
                    [['_'],['_'],[' '],[' '],[' '],[' '],[' '],[' '],[' '],['_'],['_'],['-'],['-'],[' '],[' '],['-'],['-'],['_'],['_'],['-'],['~'],[' '],[' '],['^'],['^'],['^'],['\\'],['\\'],[' '],[' '],],
                    [[' '],[' '],['-'],['-'],['_'],['_'],['_'],['-'],['-'],[' '],[' '],[' '],[' '],['_'],['_'],[' '],[' '],[' '],[' '],[' '],[' '],[' '],[' '],[' '],[' '],['\''],['`'],['~'],['~'],['P'],],
                    [['_'],['_'],[' '],[' '],[' '],[' '],[' '],[' '],[' '],['_'],['_'],['-'],['-'],[' '],[' '],['-'],['-'],['_'],['_'],['-'],['\\'],['\\'],['\\'],['_'],[' '],[';'],['-'],['-'],['^'],['^'],],
                    [[' '],[' '],['-'],['-'],['_'],['_'],['_'],['-'],['-'],[' '],[' '],[' '],[' '],[' '],[' '],[' '],[' '],[' '],[' '],[' '],[' '],[' '],[' '],[' '],['\\'],['_'],['\\'],[' '],['~'],['.'],]])
        self.__stages.append(a)
        a = np.array([[[' '],[' '],[' '],[' '],[' '],[' '],[' '],[' '],[' '],[' '],[' '],[' '],[' '],[' '],[' '],[' '],[' '],[' '],[' '],[' '],[' '],['|'],['\\'],[' '],[' '],[' '],[' '],[' '],[' '],[' '],],
                    [[' '],[' '],[' '],[' '],[' '],[' '],[' '],[' '],['_'],['_'],['-'],['-'],['_'],['_'],[' '],[' '],['_'],['_'],['-'],['-'],['~'],[' '],[' '],['^'],['^'],['^'],['\\'],['\\'],[' '],[' '],],
                    [['-'],['-'],['_'],['_'],['_'],['_'],['-'],['-'],[' '],[' '],[' '],[' '],[' '],[' '],['-'],['-'],[' '],[' '],[' '],[' '],[' '],[' '],[' '],[' '],[' '],['\''],['`'],['~'],['~'],['P'],],
                    [[' '],[' '],[' '],[' '],[' '],[' '],[' '],[' '],['_'],['_'],['-'],['-'],['_'],['_'],[' '],[' '],['_'],['_'],['-'],['-'],['\\'],['\\'],['\\'],['_'],[' '],[';'],['-'],['-'],['^'],['^'],],
                    [['-'],['-'],['_'],['_'],['_'],['_'],['-'],['-'],[' '],[' '],[' '],[' '],[' '],[' '],['-'],['-'],[' '],[' '],[' '],[' '],[' '],[' '],[' '],[' '],['\\'],['_'],['\\'],[' '],['~'],['.'],]])
        self.__stages.append(a)
        a = np.array([[[' '],[' '],[' '],[' '],[' '],[' '],[' '],[' '],[' '],[' '],[' '],[' '],[' '],[' '],['_'],['_'],[' '],[' '],[' '],[' '],[' '],['|'],['\\'],[' '],[' '],[' '],[' '],[' '],[' '],[' '],],
                    [['-'],['-'],['_'],[' '],[' '],[' '],[' '],[' '],[' '],[' '],[' '],['_'],['-'],['-'],[' '],[' '],['-'],['-'],['_'],['_'],['~'],[' '],[' '],['^'],['^'],['^'],['\\'],['\\'],[' '],[' '],],
                    [[' '],[' '],[' '],['-'],['-'],['-'],['_'],['_'],['-'],['-'],['-'],[' '],[' '],[' '],['_'],['_'],[' '],[' '],[' '],[' '],[' '],[' '],[' '],[' '],[' '],['\''],['`'],['~'],['~'],['P'],],
                    [['-'],['-'],['_'],[' '],[' '],[' '],[' '],[' '],[' '],[' '],[' '],['_'],['-'],['-'],[' '],[' '],['-'],['-'],['_'],['_'],['\\'],['\\'],['\\'],['_'],[' '],[';'],['-'],['-'],['^'],['^'],],
                    [[' '],[' '],[' '],['-'],['-'],['-'],['_'],['_'],['-'],['-'],['-'],[' '],[' '],[' '],[' '],[' '],[' '],[' '],[' '],[' '],[' '],[' '],[' '],[' '],['\\'],['_'],['\\'],[' '],['~'],['.'],]])
        self.__stages.append(a)
        a = np.array([[[' '],[' '],[' '],[' '],[' '],[' '],[' '],[' '],[' '],[' '],['_'],['_'],['_'],[' '],[' '],[' '],[' '],[' '],[' '],[' '],[' '],['|'],['\\'],[' '],[' '],[' '],[' '],[' '],[' '],[' '],],
                    [[' '],[' '],[' '],[' '],[' '],['_'],['_'],['-'],['-'],['-'],[' '],[' '],[' '],['-'],['-'],['-'],['_'],['_'],['-'],['-'],['~'],[' '],[' '],['^'],['^'],['^'],['\\'],['\\'],[' '],[' '],],
                    [['_'],['_'],['-'],['-'],['-'],[' '],[' '],[' '],[' '],[' '],['_'],['_'],['_'],[' '],[' '],[' '],[' '],[' '],[' '],[' '],[' '],[' '],[' '],[' '],[' '],['\''],['`'],['~'],['~'],['P'],],
                    [[' '],[' '],[' '],[' '],[' '],['_'],['_'],['-'],['-'],['-'],[' '],[' '],[' '],['-'],['-'],['-'],['_'],['_'],['-'],['-'],['\\'],['\\'],['\\'],['_'],[' '],[';'],['-'],['-'],['^'],['^'],],
                    [['_'],['_'],['-'],['-'],['-'],[' '],[' '],[' '],[' '],[' '],[' '],[' '],[' '],[' '],[' '],[' '],[' '],[' '],[' '],[' '],[' '],[' '],[' '],[' '],['\\'],['_'],['\\'],[' '],['~'],['.'],]])
        self.__stages.append(a)
        a=np.array([[[' '],[' '],[' '],[' '],[' '],[' '],[' '],[' '],[' '],[' '],[' '],[' '],[' '],[' '],[' '],[' '],[' '],[' '],[' '],[' '],[' '],['|'],['\\'],[' '],[' '],[' '],[' '],[' '],[' '],[' '],],
                    [[' '],[' '],[' '],[' '],[' '],[' '],[' '],[' '],[' '],[' '],[' '],[' '],[' '],[' '],[' '],[' '],['_'],['_'],['_'],['_'],['~'],[' '],[' '],['^'],['^'],['^'],['\\'],['\\'],[' '],[' '],],
                    [[' '],[' '],[' '],[' '],[' '],[' '],[' '],[' '],[' '],[' '],['_'],['_'],['_'],['-'],['-'],['-'],[' '],[' '],[' '],[' '],[' '],[' '],[' '],[' '],[' '],['\''],['`'],['~'],['~'],['P'],],
                    [['_'],['_'],['_'],['_'],['_'],['-'],['-'],['-'],['-'],['-'],[' '],[' '],[' '],[' '],[' '],[' '],['_'],['_'],['-'],['-'],['\\'],['\\'],['\\'],['_'],[' '],[';'],['-'],['-'],['^'],['^'],],
                    [[' '],[' '],[' '],[' '],[' '],[' '],[' '],[' '],[' '],[' '],['_'],['_'],['_'],['-'],['-'],['-'],[' '],[' '],[' '],[' '],[' '],[' '],[' '],[' '],['\\'],['_'],['\\'],[' '],['~'],['.'],],
                    [['_'],['_'],['_'],['_'],['_'],['-'],['-'],['-'],['-'],['-'],[' '],[' '],[' '],[' '],[' '],[' '],[' '],[' '],[' '],[' '],[' '],[' '],[' '],[' '],[' '],[' '],[' '],[' '],[' '],[' '],]])
        self.__ud_stages.append(a)
        a=np.array([[['-'],['-'],['-'],['-'],['-'],['-'],['_'],['_'],['_'],[' '],[' '],[' '],[' '],[' '],[' '],[' '],[' '],[' '],[' '],[' '],[' '],['|'],['\\'],[' '],[' '],[' '],[' '],[' '],[' '],[' '],],
                    [[' '],[' '],[' '],[' '],[' '],[' '],[' '],[' '],[' '],['-'],['-'],['-'],['_'],['_'],['_'],[' '],[' '],[' '],[' '],[' '],[' '],['|'],[' '],['\\'],['^'],['^'],['\\'],['\\'],[' '],[' '],],
                    [['-'],['-'],['-'],['-'],['-'],['-'],['_'],['_'],['_'],[' '],[' '],[' '],[' '],[' '],[' '],['-'],['-'],['-'],['_'],['_'],['~'],[' '],[' '],['^'],[' '],['\''],['`'],['~'],['~'],['P'],],
                    [[' '],[' '],[' '],[' '],[' '],[' '],[' '],[' '],[' '],['-'],['-'],['-'],['_'],['_'],['_'],[' '],[' '],[' '],[' '],[' '],[' '],[' '],[' '],['_'],[' '],[';'],['-'],['-'],['^'],['^'],],
                    [[' '],[' '],[' '],[' '],[' '],[' '],[' '],[' '],[' '],[' '],[' '],[' '],[' '],[' '],[' '],['-'],['-'],['-'],['_'],['_'],['\\'],['\\'],['\\'],[' '],['\\'],['_'],['\\'],[' '],['~'],['.'],]])
        self.__ud_stages.append(a)

        self.__mask = np.full(np.shape(self.__stages[0]),Fore.BLACK)
        self.__alt_mask = np.full(np.shape(self.__ud_stages[0]),Fore.BLACK)

    def move_up(self, val):
        initial = self._cur_pos[0]
        self._cur_pos[0] = max(0, self._cur_pos[0]-val)
        initial -= self._cur_pos[0]
        self.__last_vals.pop(0)
        self.__last_vals.append(initial)

    def move_down(self, val):
        initial = self._cur_pos[0]
        self._cur_pos[0] = min(config.SCREENHEIGHT-np.shape(self.__stages[0])[0]-2, self._cur_pos[0]+val)
        initial -= self._cur_pos[0]
        self.__last_vals.pop(0)
        self.__last_vals.append(initial)

    def shoot(self):
        bullet = Bullet([self._cur_pos[0],self._cur_pos[1]+np.shape(self.__stages[0])[1]])
        return bullet

    def attract(self,pos,range):
        pass
    



if __name__ == "__main__":
    fd = open('temp', 'r')
    a = fd.read()
    # print(a)
    print('[[', end='')
    for x in a:
        if x == "\n":
            print('],'+x+'[', end='')
        else:
            if x == '\'' or x == '\"' or x == '\\':
                print('[\''+'\\'+x+'\'],', end='')
            else:
                print('[\''+x+'\'],', end='')
    print(']]')
    x = 3 if True else 2
